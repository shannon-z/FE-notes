### JS是单线程语言  
JavaScript 一大特点就是单线程的, 即同一时间只能做一件事. JavaScript作为浏览器脚本语言, 主要的功能是与用户互动, 以及操作DOM. 这决定了它是单线程的, 否则会带来很复杂的同步问题( 假定JavaScript同时有两个线程，一个线程在某个DOM节点上添加内容，另一个线程删除了这个节点，这时浏览器应该以哪个线程为准？ )  

为了利用多核CPU的计算能力，HTML5提出Web Worker标准，允许JavaScript脚本创建多个线程，但是子线程完全受主线程控制，且不得操作DOM。所以，这个新标准并没有改变JavaScript单线程的本质。  

### 任务队列  
单线程就意味着，所有任务需要排队，前一个任务结束，才会执行后一个任务。如果前一个任务耗时很长，后一个任务就不得不一直等着。  

任务可以分为两种, 一种是同步任务( synchronous ), 另一种是异步任务( asynchronous ). 同步任务指的是, 在主线程上排队执行的任务, 只有当前一个任务执行完毕, 才能执行后一个任务; 异步任务指的是, 不进入主线程, 而进入' 任务队列 ( task queue ) ' 的任务, 只有" 任务队列 " 通知主线程, 某个异步任务可以执行了, 该任务才会进入主线程执行.  

具体来说，异步执行的运行机制如下。（同步执行也是如此，因为它可以被视为没有异步任务的异步执行。）  
- 所有同步任务都在主线程上执行，形成一个执行栈（execution context stack）。 
- 主线程之外，还存在一个"任务队列"（task queue）。只要异步任务有了运行结果，就在"任务队列"之中放置一个事件。 
- 一旦"执行栈"中的所有同步任务执行完毕，系统就会读取"任务队列"，看看里面有哪些事件。那些对应的异步任务，于是结束等待状态，进入执行栈，开始执行。 
- 主线程不断重复上面的第三步。 


只要主线程空了，就会去读取"任务队列"，这就是JavaScript的运行机制。


### 异步实现原理  
```JavaScript
var ajax = $.ajax({
    url: '/data/data1.json',
    success: function () {
        console.log('success')
    }
})
```
对于这种传递过去不执行, 等出来结果之后才执行的函数, 叫做callback ,即回调函数  

实现异步的最核心原理, 就是将callback 作为参数传递给异步执行函数, 当有结果之后再触发callback 执行  

### 常见的异步操作  
- 网络请求, 如ajax, http.get   
- IO操作, 如readFile, readdir  
- 定时函数, 如setTimeout, setInterval  



